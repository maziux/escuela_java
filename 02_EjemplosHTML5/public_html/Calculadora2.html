<!DOCTYPE html>
<!--
To change this license header, choose License Headers in Project Properties.
To change this template file, choose Tools | Templates
and open the template in the editor.
-->
<html>
    <head>
        <title>CALCULADORA 2</title>
        <meta charset="UTF-8">
        <meta name="viewport" content="width=device-width, initial-scale=1.0">
        <link rel="stylesheet" href="estilos/calculadora_css.css" />
    </head>
    <body>
        <h1>Calculadora2</h1>
        <div>
            <p id="datos"></p>
        </div>
        <div id="bodyCalculadora">
            <div class="row">
                <input class="btn" type="button" value="7" onClick="pulsar('7')"/>
                <input class="btn" type="button" value="8" onClick="pulsar('8')"/>
                <input class="btn" type="button" value="9" onClick="pulsar('9')"/>
            </div>
            <div class="row">
                <input class="btn" type="button" value="4" onClick="pulsar('4')"/>
                <input class="btn" type="button" value="5" onClick="pulsar('5')"/>
                <input class="btn" type="button" value="6" onClick="pulsar('6')"/>
            </div>
            <div class="row">
                <input class="btn" type="button" value="1" onClick="pulsar('1')"/>
                <input class="btn" type="button" value="2" onClick="pulsar('2')"/>
                <input class="btn" type="button" value="3" onClick="pulsar('3')"/>
            </div>
            <div class="row">
                <input class="btn" type="button" value="0" onClick="pulsar('0')"/>
                <input class="btn" type="button" value="." onClick="point()"/>                
                <input class="btn" type="button" value="=" onClick="resultado()"/>
            </div>
            <div class="row">
                <input class="btn" type="button" value="+" onClick="operar('+')"/>
                <input class="btn" type="button" value="-" onClick="operar('-')"/>
                <input class="btn" type="button" value="CLR" onClick="limpiar()"/>
            </div>
        </div>
        
        <script src="jquery-3.4.1.js"></script>
        <script>
            function pulsar(value) {
                let contenido = document.getElementById('datos').textContent;
                let aux = contenido.trim();
                aux = contenido.split(" ");
                console.log('pulsar', aux.length);
                if (contenido.includes('=')) {
                    document.getElementById('datos').textContent = value;
                } else {
                    document.getElementById('datos').textContent = contenido + value;
                }
            }
            function operar(operando) {
                let contenido = document.getElementById('datos').textContent;
                console.log(contenido);
                let aux = contenido.trim();
                console.log(contenido);
                aux = contenido.split(" ");
                console.log('operando', operando);
                console.log('operar', aux.length);
                console.log('operar contenido', aux);    
                if (aux.length === 1) {
                    document.getElementById('datos').textContent = contenido + ' ' + operando + ' ';
                } else if (aux.length > 1) {
                    if (aux[2] === ''){
                        document.getElementById('datos').textContent = aux[0] + ' ' + operando + ' ';
                    } else if (aux[1] === '-') {
                        document.getElementById('datos').textContent = parseFloat(aux[0]) - parseFloat(aux[2]) + ' ' + operando + ' ';;
                    } else if (aux[1] === '+') {
                        document.getElementById('datos').textContent = parseFloat(aux[0]) + parseFloat(aux[2]) + ' ' + operando + ' ';
                    }                    
                }
            }
            function limpiar() {
                document.getElementById("datos").textContent = '';
            }
            function resultado() {
                let myResult;
                let valorR = document.getElementById("datos").textContent;
                if (!valorR.includes("=")){
                    let myValues = valorR.split(" ");
                    if (myValues[1] == '+') myResult = parseFloat(myValues[0]) + parseFloat(myValues[2]);
                    if (myValues[1] == '-') myResult = parseFloat(myValues[0]) - parseFloat(myValues[2]);
                    if (myValues.length === 1) myResult = parseFloat(myValues[0]);  
                    document.getElementById("datos").textContent = valorR + ' = ' + myResult;
                }
            }
            function point() {
                let contenido = document.getElementById("datos").textContent;
                let aux = contenido.trim();
                aux = contenido.split(' ');
                if (aux.length === 1) {
                    if (!aux[0].includes('.')){
                        aux[0] = aux[0] + '.';
                        document.getElementById("datos").textContent = aux[0];
                    }
                }
                if (aux.length === 3) {
                    if (!aux[2].includes('.')){
                        aux[2] = aux[2] + '.';
                        document.getElementById("datos").textContent = aux[0] + ' ' + aux[1] + ' ' + aux[2];
                    }
                }
            }
            let inicializacion = function() {
                $(".btn").mousedown(() => {
                    $(this).css("background-color","red");
                });
            };
            $(document).ready(inicializacion);
        </script>
    </body>
</html>